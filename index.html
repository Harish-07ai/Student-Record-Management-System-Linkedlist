<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Record Management (Linked List)</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: linear-gradient(to right, #d7e1ec, #ffffff); /* gradient */
    padding: 20px;
    color: #333;
  }
  h1 {
    text-align: center;
    margin-bottom: 10px;
  }
  .container {
    max-width: 900px;
    margin: auto;
    background: #fff;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }
  .form-group { margin: 10px 0; }
  input {
    padding: 8px;
    width: 100%;
    border: 1px solid #ccc;
    border-radius: 6px;
    margin-bottom:5px;
  }
  button {
    padding: 8px 16px;
    border: none;
    border-radius: 6px;
    color: #fff;
    cursor: pointer;
    margin: 5px 0;
  }
  .btn-add { background: #4CAF50; }
  .btn-update { background: #2196F3; }
  .btn-delete { background: #f44336; }

  h3#headValue {
    text-align:center;
    color:#444;
  }

  .visual {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 20px;
  }
  .node-container {
    display: flex;
    align-items: center;
  }
  .head-label {
    text-align: center;
    font-weight: bold;
    color: #555;
    font-size: 12px;
    margin-bottom: 3px;
  }
  .node {
    background: #66a6ff;
    color: white;
    border-radius: 8px;
    padding: 10px;
    margin: 5px;
    min-width: 140px;
    text-align: center;
    transition: all 0.3s ease;
  }
  .arrow {
    font-size: 24px;
    margin: 0 5px;
    color: #666;
  }
  .null-box {
    background: #ccc;
    padding: 5px 10px;
    margin: 5px;
    border-radius: 6px;
  }

  /* highlight during traversal */
  .highlight {
    border: 3px solid yellow;
    box-shadow: 0 0 10px yellow;
  }
  /* flash green on add */
  .add-flash {
    animation: addflash 0.5s alternate 2;
  }
  @keyframes addflash {
    from { background-color: #66a6ff; }
    to { background-color: #28a745; }
  }
  /* flash blue on update */
  .update-flash {
    animation: updateflash 0.5s alternate 2;
  }
  @keyframes updateflash {
    from { background-color: #66a6ff; }
    to { background-color: #2196F3; }
  }
  /* fade-out on delete (red) */
  .fade-out {
    animation: fadeoutred 0.5s forwards;
  }
  @keyframes fadeoutred {
    0%   { opacity: 1; background-color:#f44336; transform:scale(1); }
    100% { opacity: 0; background-color:#f44336; transform:scale(0.8); }
  }
</style>
</head>
<body>
  <h1>Student Record Management (Linked List)</h1>
  <div class="container">
    <!-- Add Student -->
    <div class="form-group">
      <input type="text" id="roll" placeholder="Roll Number">
      <input type="text" id="name" placeholder="Name">
      <input type="text" id="marks" placeholder="Marks">
      <button class="btn-add" onclick="addStudent()">Add Student</button>
    </div>
    <!-- Update Student -->
    <div class="form-group">
      <input type="text" id="updateRoll" placeholder="Roll Number to Update">
      <input type="text" id="updateName" placeholder="New Name">
      <input type="text" id="updateMarks" placeholder="New Marks">
      <button class="btn-update" onclick="updateStudent()">Update Student</button>
    </div>
    <!-- Delete Student -->
    <div class="form-group">
      <input type="text" id="deleteRoll" placeholder="Enter Roll Number to Delete">
      <button class="btn-delete" onclick="deleteStudent()">Delete Student</button>
    </div>
    <!-- Head Display + Visualization -->
    <h3 id="headValue">Head = NULL</h3>
    <div class="visual" id="linkedListVisual"></div>
  </div>

<script>
  class Node {
    constructor(roll, name, marks) {
      this.roll = roll;
      this.name = name;
      this.marks = marks;
      this.next = null;
    }
  }

  class LinkedList {
    constructor() {
      this.head = null;
    }
    add(roll, name, marks) {
      const newNode = new Node(roll, name, marks);
      if (!this.head) {
        this.head = newNode;
      } else {
        let current = this.head;
        while (current.next) current = current.next;
        current.next = newNode;
      }
    }
    delete(roll) {
      if (!this.head) return;
      if (this.head.roll === roll) {
        this.head = this.head.next;
        return;
      }
      let current = this.head;
      while (current.next && current.next.roll !== roll) {
        current = current.next;
      }
      if (current.next) current.next = current.next.next;
    }
    update(roll, newName, newMarks) {
      let current = this.head;
      while (current) {
        if (current.roll === roll) {
          if (newName) current.name = newName;
          if (newMarks) current.marks = newMarks;
          break;
        }
        current = current.next;
      }
    }
  }

  const studentList = new LinkedList();

  function addStudent() {
    const roll = document.getElementById('roll').value.trim();
    const name = document.getElementById('name').value.trim();
    const marks = document.getElementById('marks').value.trim();
    if (roll && name && marks) {
      studentList.add(roll, name, marks);
      displayLinkedList();
      // flash green on last node
      const nodes = document.querySelectorAll('.node');
      if (nodes.length > 0) {
        nodes[nodes.length - 1].classList.add('add-flash');
        setTimeout(() => nodes[nodes.length - 1].classList.remove('add-flash'), 1000);
      }
      document.getElementById('roll').value = '';
      document.getElementById('name').value = '';
      document.getElementById('marks').value = '';
    } else alert('Please fill all fields');
  }

  function displayLinkedList() {
    const container = document.getElementById('linkedListVisual');
    const headDisplay = document.getElementById('headValue');
    container.innerHTML = '';

    if (studentList.head) {
      headDisplay.textContent =
        `Head = [Roll: ${studentList.head.roll}, Name: ${studentList.head.name}, Marks: ${studentList.head.marks}]`;
    } else headDisplay.textContent = 'Head = NULL';

    let current = studentList.head;
    let index = 0;
    while (current) {
      const nodeContainer = document.createElement('div');
      nodeContainer.className = 'node-container';

      const nodeDiv = document.createElement('div');
      nodeDiv.className = 'node';
      nodeDiv.innerHTML = `<strong>${current.name}</strong><br>Roll: ${current.roll}<br>Marks: ${current.marks}`;

      if (index === 0) {
        const headLabel = document.createElement('div');
        headLabel.className = 'head-label';
        headLabel.textContent = 'HEAD';
        nodeContainer.appendChild(headLabel);
      }

      nodeContainer.appendChild(nodeDiv);

      if (current.next) {
        const arrow = document.createElement('div');
        arrow.className = 'arrow';
        arrow.textContent = 'â†’';
        nodeContainer.appendChild(arrow);
      } else {
        const nullBox = document.createElement('div');
        nullBox.className = 'null-box';
        nullBox.textContent = 'NULL';
        nodeContainer.appendChild(nullBox);
      }

      container.appendChild(nodeContainer);
      current = current.next;
      index++;
    }
  }

  function deleteStudent() {
    const roll = document.getElementById('deleteRoll').value.trim();
    if (!roll) { alert('Please enter Roll Number to delete'); return; }
    animatedDelete(roll);
  }

  function animatedDelete(roll) {
    const nodes = document.querySelectorAll('.node');
    let i = 0;

    function checkNext() {
      if (i >= nodes.length) { alert('Roll number not found'); return; }

      nodes[i].classList.add('highlight');
      setTimeout(() => {
        nodes[i].classList.remove('highlight');

        const nodeText = nodes[i].textContent;
        if (nodeText.includes(`Roll: ${roll}`)) {
          nodes[i].classList.add('fade-out');
          setTimeout(() => {
            studentList.delete(roll);
            document.getElementById('deleteRoll').value = '';
            displayLinkedList();
          }, 500);
        } else {
          i++;
          checkNext();
        }
      }, 400);
    }
    checkNext();
  }

  function updateStudent() {
    const roll = document.getElementById('updateRoll').value.trim();
    const newName = document.getElementById('updateName').value.trim();
    const newMarks = document.getElementById('updateMarks').value.trim();
    if (!roll) { alert('Please enter Roll Number to update'); return; }
    animatedUpdate(roll, newName, newMarks);
  }

  function animatedUpdate(roll, newName, newMarks) {
    const nodes = document.querySelectorAll('.node');
    let i = 0;

    function checkNext() {
      if (i >= nodes.length) { alert('Roll number not found'); return; }

      nodes[i].classList.add('highlight');
      setTimeout(() => {
        nodes[i].classList.remove('highlight');

        const nodeText = nodes[i].textContent;
        if (nodeText.includes(`Roll: ${roll}`)) {
          studentList.update(roll, newName, newMarks);
          displayLinkedList();
          // flash blue on updated node
          const newNodes = document.querySelectorAll('.node');
          for (let n of newNodes) {
            if (n.textContent.includes(`Roll: ${roll}`)) {
              n.classList.add('update-flash');
              setTimeout(() => n.classList.remove('update-flash'), 1000);
            }
          }
          document.getElementById('updateRoll').value = '';
          document.getElementById('updateName').value = '';
          document.getElementById('updateMarks').value = '';
        } else {
          i++;
          checkNext();
        }
      }, 400);
    }
    checkNext();
  }
</script>
</body>
</html>
